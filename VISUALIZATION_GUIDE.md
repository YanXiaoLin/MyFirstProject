# iwhereGIS 网格数据引擎 Cesium 可视化系统使用指南

## 概述

本系统提供了基于 CesiumJS 的 3D 可视化界面，用于展示和管理空域网格数据。用户可以通过直观的 Web 界面进行网格生成、航线规划和数据可视化。

## 系统特性

### 🎯 核心功能
- **3D 网格可视化**: 在 Cesium 地球仪上显示空域网格
- **实时网格生成**: 根据指定参数动态生成网格
- **航线规划**: 可视化显示无人机航线路径
- **网格属性管理**: 查看和编辑网格属性
- **统计信息**: 实时显示网格统计信息

### 🎨 界面特性
- **现代化 UI**: 简洁美观的控制面板
- **响应式设计**: 适配不同屏幕尺寸
- **实时反馈**: 操作状态和错误提示
- **3D 交互**: 支持缩放、旋转、平移等操作

## 快速开始

### 1. 启动系统

#### Windows 用户
```bash
# 双击运行
start_visualization.bat
```

#### 其他系统用户
```bash
# 安装依赖
pip install -r requirements.txt

# 启动可视化系统
python start_visualization.py
```

### 2. 访问界面
系统启动后会自动打开浏览器，访问地址：`http://localhost:5000`

## 使用说明

### 控制面板功能

#### 网格参数设置
- **经度范围**: 设置网格覆盖的经度范围
- **纬度范围**: 设置网格覆盖的纬度范围  
- **高度范围**: 设置网格的高度范围（米）
- **网格级别**: 选择网格精度级别（6-9级）

#### 操作按钮
- **生成网格**: 根据参数生成网格并显示
- **清除网格**: 清除当前显示的所有网格
- **航线规划**: 打开航线规划功能

### 网格可视化

#### 网格显示
- **蓝色边界**: 网格边界线
- **半透明填充**: 网格区域填充
- **红色中心点**: 网格中心位置
- **网格编码**: 显示网格唯一标识

#### 网格信息面板
- **网格数量**: 当前显示的网格总数
- **覆盖面积**: 网格覆盖的总面积（平方公里）
- **平均大小**: 单个网格的平均面积（平方米）

### 航线规划

#### 航点输入格式
```
经度,纬度,高度;经度,纬度,高度
```
示例：
```
114.05,22.55,100;114.08,22.58,150
```

#### 航线显示
- **黄色线条**: 航点之间的连线
- **橙色航点**: 航线经过的航点标记
- **红色高亮**: 航线经过的网格高亮显示

### 3D 地图操作

#### 基本操作
- **鼠标左键**: 旋转视角
- **鼠标右键**: 平移视角
- **鼠标滚轮**: 缩放
- **双击**: 快速定位到点击位置

#### 视角控制
- **Home 键**: 返回初始视角
- **Ctrl + 鼠标**: 倾斜视角
- **Shift + 鼠标**: 平移视角

## 技术架构

### 前端技术
- **CesiumJS**: 3D 地球可视化引擎
- **HTML5/CSS3**: 现代化 Web 界面
- **JavaScript ES6+**: 交互逻辑实现

### 后端技术
- **Flask**: Python Web 框架
- **Flask-CORS**: 跨域资源共享
- **AirspaceGridManager**: 核心网格引擎

### 数据流
```
用户操作 → 前端界面 → HTTP API → 网格引擎 → 数据返回 → 3D 渲染
```

## 性能优化

### 网格数量控制
- 建议单次生成网格数量不超过 1000 个
- 大范围区域建议使用较低精度级别
- 可通过清除功能释放内存

### 浏览器要求
- **Chrome**: 版本 80+
- **Firefox**: 版本 75+
- **Edge**: 版本 80+
- **Safari**: 版本 13+

### 硬件建议
- **内存**: 4GB 以上
- **显卡**: 支持 WebGL 2.0
- **网络**: 稳定的互联网连接（加载 Cesium 资源）

## 故障排除

### 常见问题

#### 1. 页面无法加载
**症状**: 浏览器显示空白页面或错误信息
**解决方案**:
- 检查 API 服务器是否正常启动
- 确认端口 5000 未被占用
- 检查防火墙设置

#### 2. 网格生成失败
**症状**: 点击生成网格后无响应或显示错误
**解决方案**:
- 检查参数输入是否正确
- 确认经纬度范围有效
- 查看浏览器控制台错误信息

#### 3. 3D 地图显示异常
**症状**: 地图显示不完整或性能较差
**解决方案**:
- 更新浏览器到最新版本
- 检查显卡驱动是否支持 WebGL
- 减少同时显示的网格数量

#### 4. API 连接失败
**症状**: 显示"无法连接到 API 服务器"
**解决方案**:
- 确认 `api_server.py` 正在运行
- 检查网络连接
- 重启可视化系统

### 调试模式

#### 启用调试
在浏览器中按 F12 打开开发者工具，查看 Console 标签页的错误信息。

#### 日志查看
API 服务器的日志会显示在启动终端中，包含详细的错误信息。

## 扩展功能

### 自定义开发
系统采用模块化设计，可以轻松扩展新功能：

1. **添加新的可视化类型**
2. **集成其他数据源**
3. **自定义网格样式**
4. **添加分析工具**

### API 集成
系统提供完整的 RESTful API，可以与其他系统集成：

```bash
# 获取网格数据
curl http://localhost:5000/api/grids/generate

# 查询网格信息
curl http://localhost:5000/api/grids/GRID_CODE

# 规划航线
curl http://localhost:5000/api/grids/route
```

## 更新日志

### v1.0.0 (当前版本)
- ✅ 基础网格可视化功能
- ✅ 航线规划功能
- ✅ 3D 交互界面
- ✅ 实时数据更新
- ✅ 响应式设计

### 计划功能
- 🔄 网格属性编辑界面
- 🔄 批量数据导入
- 🔄 高级分析工具
- 🔄 数据导出功能

## 技术支持

### 文档资源
- [CesiumJS 官方文档](https://cesium.com/docs/)
- [Flask 官方文档](https://flask.palletsprojects.com/)
- [项目 API 文档](README_API.md)

### 联系方式
如有问题或建议，请通过以下方式联系：
- 项目 Issues: GitHub 项目页面
- 技术支持: 项目维护团队

---

**注意**: 本系统仅供学习和研究使用，请勿用于商业用途。 